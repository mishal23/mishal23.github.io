{"componentChunkName":"component---src-components-blog-post-js","path":"/migration-to-gatsby/","result":{"data":{"markdownRemark":{"html":"<p>I had started building my personal website in 2017 with static HTML, CSS, JS, and in 2018 based on the available options, I went ahead with Jekyll. Overall, everything was working fine with Jekyll and was smooth. Although, my Twitter feed was filled with <a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"nofollow\">Gatsby</a>, and I had seen some stickers named \"My Website is faster than yours\" of Gatsby while interacting with them for <a href=\"https://hackverse.nitk.ac.in\" target=\"_blank\" rel=\"nofollow\">HackVerse Hackathon</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6438d338cd1d0f7b42535f45f24ae359/8e1fc/website-faster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.12883435582822%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAwACBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAABAwAC/9oADAMBAAIQAxAAAAHBr01eOa7POcczVjnf/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAIBAxARMRL/2gAIAQEAAQUCWv0nJ2VWQNrU0tJIlo3c/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAYEQACAwAAAAAAAAAAAAAAAAAAEgEQEf/aAAgBAgEBPwFhoMr/xAAhEAABAQcFAAAAAAAAAAAAAAABAAIQESEiMUEDEiBRYf/aAAgBAQAGPwIHKgXBmxUyBjxU2dt1ZjtUkw4f/8QAHxAAAgIBBAMAAAAAAAAAAAAAAREAIUEQIDFxYdHw/9oACAEBAAE/ISiDbEZUI6Dj0ty2qfZ6hRivKBbFGOyHxwwDCHi9n//aAAwDAQACAAMAAAAQ0B3C/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/ECN//8QAGBEBAQEBAQAAAAAAAAAAAAAAAQARIWH/2gAIAQIBAT8QGPb2kNuX/8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUWFx/9oACAEBAAE/EM0ZoRh6PPvEbAFplHcziKjuTirxeXD3iVqsyCFuja31uJfANafHZ7MF0GxORgpBx8Ba6Gz3kiE1AlP2r1d1HmPMtn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby quote\"\n        title=\"\"\n        src=\"/static/6438d338cd1d0f7b42535f45f24ae359/6aca1/website-faster.jpg\"\n        srcset=\"/static/6438d338cd1d0f7b42535f45f24ae359/d2f63/website-faster.jpg 163w,\n/static/6438d338cd1d0f7b42535f45f24ae359/c989d/website-faster.jpg 325w,\n/static/6438d338cd1d0f7b42535f45f24ae359/6aca1/website-faster.jpg 650w,\n/static/6438d338cd1d0f7b42535f45f24ae359/8e1fc/website-faster.jpg 900w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This made me look at some of the Gatsby sites, and it felt that the websites were fast, and it had the support of PWA, something I wanted on my site. Moreover, since it was based on React, I decided to try out to move my personal website from Jekyll to Gatsby.</p>\n<h2>The Migration</h2>\n<p>I won't be listing the steps in detail on how I migrated because there are plenty of blogs out there, and the documentation provided by Gatsby is excellent. I could get anything I wanted on the Gatsby documentation. I started looking into the tutorial of Gatsby to get the hang of it, and started my new website with the default starter code.</p>\n<p>Here are the significant steps:</p>\n<ul>\n<li>Started looking into the <a href=\"https://www.gatsbyjs.org/tutorial/\" target=\"_blank\" rel=\"nofollow\">tutorial</a>,</li>\n<li>Took the gatsby default starter code,</li>\n<li>Added the inital components (<code>sidebar</code>, <code>post</code>, <code>default</code>), and set up the basic styling as per the old website,</li>\n<li>Added the content for the non-blog pages (<code>about</code>, <code>projects</code>, <code>contact</code>, <code>404</code>),</li>\n<li>Setup blog page component view (blogPost) from markdown pages using the <code>onCreateNode</code>, <code>createPages</code> APIs,</li>\n<li>Learned a bit about using GraphQL and GraphiQL UI,</li>\n<li>Exported all the blog posts from the previous site,</li>\n<li>Index Page Display to list all the blog posts (<code>blogList</code>),</li>\n<li>Added SEO for all pages,</li>\n<li>Added automatic deployment with TravisCI,</li>\n<li>Added Google Analytics &#x26; PWA support,</li>\n<li>Some other fixes for overall look &#x26; feel.</li>\n</ul>\n<p>Here's the lighthouse report on the new website:\n<img src=\"./images/lighthouse-report.JPG\" alt=\"Lighthouse Report\"></p>\n<h2>GitHub Actions</h2>\n<p>When GitHub Actions was released in <a href=\"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/\" target=\"_blank\" rel=\"nofollow\">August 2019</a>, I always wanted to give it a try for some project but didn't get enough time to try it out. While I was using Travis CI with this deployment, I thought of giving GitHub Actions a try. Finally!</p>\n<p>Here are the steps I followed:</p>\n<ul>\n<li>Generated a New Token from GitHub <code>Settings -> Developer Settings -> Personal access tokens</code> with <strong>repo</strong> access scope.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e603efb098495d97c5094d4dfed615c1/d7ab4/repo-token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.67484662576687%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVR42pWO226DMAyG86Y7obVsUA4SD7LLMa0qUNauY681aQfIwUASSKBJK/V+1ufIsv/8Niq25fZtt8nyrChzW+/3h8pwqD7fPyqD6RTl7sJ6k6ev2XO6fnpJkR8lSz9yvcD1Q0MQJw+r8DGIVnHihbEXxDfO4uru/sK1szixvHVcJMZZDIr3JrhSev5PID7outPnX1pPjDJCCCakrhsp5UkzTdOsTc4zg/b796+htMeEsxYx6L8azoUcx9EoGAChFGOCMQZooe1aANpJENZ+VGowOnOhQWskOqCENA1mDKw3Vz9s7LnU2o7PjzG1aC2EsHuGgTOQXBwBvCsorOtoHI8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Token\"\n        title=\"\"\n        src=\"/static/e603efb098495d97c5094d4dfed615c1/a6d36/repo-token.png\"\n        srcset=\"/static/e603efb098495d97c5094d4dfed615c1/222b7/repo-token.png 163w,\n/static/e603efb098495d97c5094d4dfed615c1/ff46a/repo-token.png 325w,\n/static/e603efb098495d97c5094d4dfed615c1/a6d36/repo-token.png 650w,\n/static/e603efb098495d97c5094d4dfed615c1/e548f/repo-token.png 975w,\n/static/e603efb098495d97c5094d4dfed615c1/d7ab4/repo-token.png 1014w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>I was deploying on my root github.io, so the name of my repo is mishal23.github.io, I added the token in the repository <code>Settings -> Secrets</code> with the name <code>GH_TOKEN</code></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/949c1d6901752487d6d71ee630dbbc8d/f6f7a/set-secret.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR42o1R2ZKEIAz0/39zagZEDjkDBHADOq+728ZUQyVNGjalT2kcE/otDJdOnz4EiuC9jzGWL2hprQMAbYw+Hd8Ppo7NpypsoXip/JIgXS4Vc8GVKxHIlbhURkgdEhzH4YyaQrlsWLGWTCgZSsl0Gu36EBOA9T5BJpYSUC61Ug6n9mpvDVvvm4fuoI9x0U/ZOieluv7CLL2uzaW2W8zY58YYxhjGOBlTSh0koxTjXCktpTTmdN7f5mutdzOqgEtrilHd+834LjjfP4ztu3h/mBAHKZKQj9mm1lqn+tnsoXGLfQ09+mij4cC1uFaMNeTD+3Q3eQ6xVnyaxxdQi6b7qe3pnN9taLGv4ew8vcQWoO0OY3mOxjZiHqn28StuiW3ezBkyjnvy659Yg/wAZrZEs6Ct3/UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Set Secret Token\"\n        title=\"\"\n        src=\"/static/949c1d6901752487d6d71ee630dbbc8d/a6d36/set-secret.png\"\n        srcset=\"/static/949c1d6901752487d6d71ee630dbbc8d/222b7/set-secret.png 163w,\n/static/949c1d6901752487d6d71ee630dbbc8d/ff46a/set-secret.png 325w,\n/static/949c1d6901752487d6d71ee630dbbc8d/a6d36/set-secret.png 650w,\n/static/949c1d6901752487d6d71ee630dbbc8d/e548f/set-secret.png 975w,\n/static/949c1d6901752487d6d71ee630dbbc8d/f6f7a/set-secret.png 1009w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Created a file named <code>gh-pages-deploy.yml</code> in the directory <code>.github/workflows/</code> using the Simple Workflow template available under the Actions tab on the repository.</p>\n</li>\n<li>\n<p>Since the User pages must be built from the master branch, I set my default branch as <strong>source</strong> on the repository and left the master branch for deployment and hence triggered the workflow only on <strong>source</strong> branch push,</p>\n</li>\n<li>\n<p>I configured it to node.js environment with <strong>12.x</strong> version, cached the dependencies so that it doesn't have to be installed every time and faster CI,</p>\n</li>\n<li>\n<p>Configured to initial git settings of user.name and user.email as it is required, used to <strong>GH_TOKEN</strong> to give the access and then made the deployment run using the following command:</p>\n</li>\n</ul>\n<deckgo-highlight-code language=\"bash\"  >\n          <code slot=\"code\">npm run deploy</code>\n        </deckgo-highlight-code>\n<p>That's it! Pretty simple! Really like the simplicity of GitHub Actions. Find the complete configuration file <a href=\"https://github.com/mishal23/mishal23.github.io/blob/source/.github/workflows/gh-pages-deploy.yml\" target=\"_blank\" rel=\"nofollow\">here</a></p>\n<h2>Conclusion</h2>\n<p>The migration was definitely worth it. The site is blazing fast 🚀 and, moreover, got to pick up some new skills. I would recommend anyone to migrate to gatsby. There are certain features and fixes which I plan to do in due time. If you need any further help, feel free to take a look at <a href=\"https://github.com/mishal23/mishal23.github.io/\" target=\"_blank\" rel=\"nofollow\">the repo</a> or <a href=\"/contact\">contact me</a> If there are any issues you come across, please do open up <a href=\"https://github.com/mishal23/mishal23.github.io/issues\" target=\"_blank\" rel=\"nofollow\">here</a> or would love it if you fix it :)</p>","frontmatter":{"title":"Migrating Jekyll Blog to Gatsby","date":"April 28, 2020","description":"Steps to migrate Jekyll Blog to Gatsby and deploying Site using GitHub Actions to GitHub Pages","keywords":"mishal23, gatsby, jekyll, migration, static-site-generator, fast, modern, frameworks, react, graphql, github-actions, github, ci-cd","blog":true}}},"pageContext":{"slug":"/migration-to-gatsby"}},"staticQueryHashes":["3172349477","764694655"],"slicesMap":{}}